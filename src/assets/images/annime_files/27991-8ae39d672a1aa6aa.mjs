(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([["27991"],{548777:function(e,t,n){n.d(t,{$:()=>u,r:()=>h});var r=n(667294),i=n(213491),o=n(521367),a=n(613567),s=n(774838),l=n(661376),d=n(785893);let{Provider:c,useHook:u}=(0,i.Z)("PinRep");function h({children:e}){let{isAuthenticated:t}=(0,s.B)(),{checkExperiment:n}=(0,a.F)(),{experience:i}=(0,o.Ow)(1000069),[u,h]=(0,r.useState)(!0),[p,m]=(0,r.useState)(!1),[g,_]=(0,r.useState)(!1),[f,b]=(0,r.useState)(null),[y,x]=(0,r.useState)(null),v=(0,o.oS)(1000069),{anyEnabled:P}=n("ap_bmi_custom_activation_nux_revamp_mweb_v2",{dangerouslySkipActivation:!0}),j=(0,l.Z)(t&&P?{name:"UserStateResource",options:{state:"QUICK_SAVES_BOARD_ID"}}:null).data;(0,r.useEffect)(()=>{if(!t){h(!1);return}i&&(!i||i?.experience_id===500417&&i?.display_data.hide_footer)?v.viewExperience(1000069,500417):h(!1),m(!0)},[i]);let S=(0,r.useMemo)(()=>({hasMetSaveRequirementOnUseCaseFeed:g,hasSimplifiedPinGridExpLoaded:p,hidePinRepFooter:u,quickSaveBoardId:j,setHasMetSaveRequirementOnUseCaseFeed:_,setUseCaseFeedOriginalPinId:x,setUseCaseFeedRepinId:b,useCaseFeedOriginalPinId:y,useCaseFeedRepinId:f}),[g,p,u,j,_,x,b,y,f]);return(0,d.jsx)(c,{value:S,children:e})}},387012:function(e,t,n){n.d(t,{Z:()=>a});var r=n(883119),i=n(138596),o=n(785893);function a({children:e,onClick:t,isSelected:n}){let a=(0,i.ZP)(),s=n?a._('Drag and drop selected item', 'BulkEditPinWrapper.tapArea.selectedAccessibilityLabel', 'Label for selected item that can be dragged and dropped.'):a._('Drag and drop deselected item', 'BulkEditPinWrapper.tapArea.deselectedAccessibilityLabel', 'Label for deselected item that can be dragged and dropped.');return(0,o.jsxs)(r.xu,{position:"relative",children:[(0,o.jsx)(r.xu,{bottom:!0,left:!0,position:"absolute",right:!0,top:!0,children:(0,o.jsx)(r.iP,{accessibilityLabel:s,fullHeight:!0,fullWidth:!0,onTap:({event:e})=>{e.preventDefault(),e.stopPropagation(),t()},rounding:2})}),(0,o.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:{pointerEvents:"none"}},children:e})]})}},876645:function(e,t,n){n.d(t,{Z:()=>i});let r="undefined"!=typeof window&&window.performance&&window.performance.now?()=>window.performance.now():()=>Date.now();function i({window:e,duration:t,run:n}){let i=r(),o=0,a=null,s=()=>{let l=r()-i,d=l-o;if(t===1/0)n(0,l,d);else{let e=l/t;if(e>=1){n(1,l,d);return}n(e,l,d)}o=l,a=e.requestAnimationFrame(s)};return{start:()=>{a=e.requestAnimationFrame(s)},cancel:()=>{a&&(e.cancelAnimationFrame(a),a=null)}}}},568736:function(e,t,n){function r(e){return[0,24,21,26].includes(e)}function i({articleType:e,id:t,title:n}){let r=n.toLowerCase().replace(/[.,\/#!?$%\^&\*+;:{}=\-_`~()\â€™'"]/g,"").trim().replace(/\s+/g,"-");return"today"===e?`/today/shop/${r}/${t}/`:`/discover/article/${r}/${t}/`}n.d(t,{x:()=>i,y:()=>r})},828801:function(e,t,n){n.d(t,{Z:()=>u});var r=n(667294),i=n(883119),o=n(876645),a=n(564377),s=n(386385),l=n(785893);function d(e,t,n){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:r+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class c extends r.Component{constructor(...e){super(...e),d(this,"state",{visible:!1}),d(this,"setRef",e=>{this.element||(this.element=e,e?.addEventListener("dragover",this.handleDragOver),e?.addEventListener("dragleave",this.handleDragLeave))}),d(this,"handleDragOver",()=>{let{placement:e}=this.props;if(!this.scrollAnimationManager){let t="top"===e?-1:1;this.scrollAnimationManager=(0,o.Z)({window,duration:1/0,run:(e,n,r)=>{window.scrollTo(0,window.scrollY+(n<500?.8:1.2000000000000002)*t*r)}}),this.scrollAnimationManager.start()}}),d(this,"handleDragLeave",()=>{this.scrollAnimationManager&&this.scrollAnimationManager.cancel()}),d(this,"element",null),d(this,"visibleTimeout",null)}componentDidMount(){this.visibleTimeout=window.setTimeout(()=>this.setState({visible:!0}),500)}componentWillUnmount(){let e=this.element;e&&(e.removeEventListener("dragover",this.handleDragOver),e.removeEventListener("dragleave",this.handleDragLeave)),this.scrollAnimationManager&&this.scrollAnimationManager.cancel(),this.visibleTimeout&&window.clearTimeout(this.visibleTimeout)}render(){let{height:e,placement:t}=this.props,{visible:n}=this.state;return(0,l.jsx)(i.xu,{bottom:"bottom"===t,dangerouslySetInlineStyle:{__style:{zIndex:0x1000037,visibility:n?"visible":"hidden"}},height:e,left:!0,position:"fixed",right:!0,top:"top"===t,children:(0,l.jsx)("div",{ref:this.setRef,style:{width:"100%",height:"100%"}})})}}function u({noStickyHeader:e}){let t=e?0:s.hu;return(0,l.jsx)(a.Z,{children:(0,l.jsx)(i.mh,{children:(0,l.jsxs)(i.xu,{children:[(0,l.jsx)(c,{height:120+t,placement:"top"}),(0,l.jsx)(c,{height:120,placement:"bottom"})]})})})}},2587:function(e,t,n){n.d(t,{Z:()=>d,y:()=>s});var r=n(667294),i=n(60598),o=n(14890),a=n(785893);let s={Pin:"pin",Board:"board",Section:"section",CarouselItem:"carouselitem"};class l extends r.Component{render(){let{children:e,connectDragSource:t,connectDropTarget:n,isDragging:r,isDraggingInternal:i,isDropTargetOnly:o}=this.props,s=n((0,a.jsx)("div",{ref:e=>this.targetEl=e,style:{opacity:r||i?0:1},children:e}));return o?s:t(s)}}let d=(0,o.compose)((0,i.DropTarget)(e=>e.type,{hover:({index:e,onDragHover:t},n,r)=>{t(e,function(e,t){let n=t.targetEl;if(!(n&&n instanceof HTMLElement))return null;let{x:r,y:i}=e.getClientOffset(),{left:o,right:a,top:s,bottom:l,width:d,height:c}=n.getBoundingClientRect();return{positionRelativeToCenter:{x:r-(o+a)/2,y:i-(s+l)/2},boundingBox:{width:d,height:c}}}(n,r))}},e=>({connectDropTarget:e.dropTarget()})),(0,i.DragSource)(e=>e.type,{beginDrag:({index:e,onDragBegin:t})=>(t(e),{index:e}),endDrag:({onDragEnd:e},t)=>e(t.didDrop())},(e,t)=>({connectDragSource:e.dragSource(),isDraggingInternal:t.internalMonitor.registry.dragSources.size>0&&t.isDragging()})))(l)},728027:function(e,t,n){n.d(t,{Z:()=>a});var r=n(60598),i=n(14890),o=n(548303);let a=e=>t=>(0,i.compose)(o.Z,(0,r.DropTarget)(e,{},(e,t)=>({connectDropTarget:e.dropTarget(),isDragWithinBounds:t.isOver()})))(t)},250026:function(e,t,n){n.d(t,{Z:()=>r});function r(e,t,n,i=0){if(-1===t||-1===n||t===n)return e;let o=n+i,a=t+i;if(o<0||o>=e.length||a<0||a>=e.length)return e;let s=[...e],l=s[a],d=a<o?1:-1;for(let t=a;t!==o;t+=d)s[t]=e[t+d];return s[o]=l,s}},574991:function(e,t,n){n.d(t,{J:()=>r,Z:()=>i});let r=-1;function i(e){switch(e){case 0:return"shopping-bag";case 1:return"tag";default:return"search"}}},718846:function(e,t,n){n.d(t,{Z:()=>a});var r=n(462867),i=n(200619),o=n(601871);let a=()=>{let e=(0,r.Z)(),t=(0,i.Z)();return(0,o.lJ)(e,t)}},250408:function(e,t,n){n.d(t,{Z:()=>C});var r=n(667294),i=n(317109),o=n(661376),a=n(372622),s=n(785893);let l="474x",d=e=>t=>t.replace(/pinimg\.com\/\d+x\d*\//,`pinimg.com/${e}/`),c=e=>["236x",l,"736x"].map((t,n)=>`${d(t)(e)} ${n+1}x`).join(", ");function u({boardId:e,customizable:t}){let n=(0,o.Z)({name:"BoardFeedResource",options:{board_id:e,field_set_key:"images_only_item",filter_section_pins:!1,page_size:t?60:4}}),r=!n.isLoaded,i=(n.data||[]).filter(({type:e})=>"pin"===e).map(({images:e})=>e["236x"]);return(0,s.jsx)(a.Z,{customizable:t,getDownloadImageURL:d("1200x"),getMainImageURL:d(l),getThumbnailImageSrcSet:c,id:e,images:i,isLoadingImages:r})}var h=n(485521),p=n(122222);let m=(0,r.lazy)(()=>Promise.all([n.e("26134"),n.e("60413"),n.e("79339"),n.e("5696"),n.e("97128")]).then(n.bind(n,87918))),g=(0,r.lazy)(()=>n.e("32082").then(n.bind(n,171544))),_=(0,r.lazy)(()=>n.e("55355").then(n.bind(n,955994))),f=(0,r.lazy)(()=>n.e("35872").then(n.bind(n,456487))),b=(0,r.lazy)(()=>n.e("48827").then(n.bind(n,64625))),y=(0,r.lazy)(()=>n.e("18633").then(n.bind(n,205980))),x=(0,r.lazy)(()=>n.e("7071").then(n.bind(n,766339))),v=(0,r.lazy)(()=>n.e("82820").then(n.bind(n,602655))),P=(0,r.lazy)(()=>Promise.all([n.e("28079"),n.e("58933")]).then(n.bind(n,964364))),j=(0,r.lazy)(()=>n.e("16615").then(n.bind(n,85293))),S=(0,r.lazy)(()=>Promise.all([n.e("28079"),n.e("78335")]).then(n.bind(n,696655))),w=(0,r.lazy)(()=>n.e("70548").then(n.bind(n,729426))),D=(0,r.lazy)(()=>n.e("21834").then(n.bind(n,868329)));function C({actions:e,board:t,boardSection:n,bulkEditSelectedPins:r,currentModal:o,groupPinsData:a,inSelectAll:l,onClearModal:d,mergeConfirmationModalProps:c}){let{completeCreateSectionAction:C,completeMoveAction:A,onBoardArchiveChange:B,onBoardDelete:Z,onBoardLeave:E,onBoardSectionDelete:I,onBoardSectionSave:T,onConfirmMergeSection:L,onCopyPinsToBoard:z,onDeletePins:M,onBoardMerge:O}=e;switch(o){case p.s.boardArchiveConfirmation:return B?(0,s.jsx)(i.Z,{children:(0,s.jsx)(y,{board:t,onClose:d,onConfirm:B,shouldArchive:!0})}):null;case p.s.boardUnarchiveConfirmation:return B?(0,s.jsx)(i.Z,{children:(0,s.jsx)(y,{board:t,onClose:d,onConfirm:B,shouldArchive:!1})}):null;case p.s.boardEdit:return(0,s.jsx)(i.Z,{children:(0,s.jsx)(f,{boardId:t.id,onBoardDelete:Z,onBoardLeave:E,onClose:d})});case p.s.bulkDelete:return M?(0,s.jsx)(i.Z,{children:(0,s.jsx)(v,{onClearModal:d,onCompleteBulkDelete:M,pinCountToDelete:r&&r.length||0})}):null;case p.s.bulkCopy:return z?(0,s.jsx)(i.Z,{children:(0,s.jsx)(P,{currentBoardId:t.id,onClearModal:d,onCopyToBoard:z,pinCountToCopy:r&&r.length||0})}):null;case p.s.collaboratorsAndPermissions:return(0,s.jsx)(i.Z,{children:(0,s.jsx)(m,{board:t,onDismiss:d})});case p.s.editSection:return n?(0,s.jsx)(i.Z,{children:(0,s.jsx)(S,{board:t,boardSection:n,onClearModal:d,onDeleteSection:I,onSaveSection:T})}):null;case p.s.mergeBoard:return O?(0,s.jsx)(i.Z,{children:(0,s.jsx)(b,{onCancel:d,onSubmit:O,sourceBoardId:t.id})}):null;case p.s.createSection:case p.s.moveSection:return!!r&&!!A&&(0,s.jsx)(i.Z,{children:(0,s.jsx)(j,{board:t,boardSection:n,inSelectAll:!!l,onClearModal:d,onCompleteMove:A,selectedPinIds:r,showCreateOnly:o===p.s.createSection})});case p.s.sectionMergeConfirm:return c&&L?(0,s.jsx)(i.Z,{children:(0,s.jsx)(w,{onCancel:d,onConfirm:L,source:c.source,target:c.target})}):null;case p.s.followers:return(0,s.jsx)(i.Z,{children:(0,s.jsx)(x,{boardId:t.id,followersCount:t.follower_count??0,onDismiss:d})});case p.s.pincode:return(0,s.jsx)(h.Z,{objectId:t.id,onHide:d,children:(0,s.jsx)(u,{boardId:t.id,customizable:!!t.owner?.is_partner})});case p.s.jumpstartBoard:return(0,s.jsx)(i.Z,{children:(0,s.jsx)(g,{board:t,onDismiss:d})});case p.s.simpleCreateSection:return C?(0,s.jsx)(i.Z,{children:(0,s.jsx)(_,{onClose:d,onSectionCreate:C,selectedBoard:t})}):null;case p.s.groupPins:return(0,s.jsx)(i.Z,{children:(0,s.jsx)(D,{boardId:t.id,clusterId:a?.clusterId,onDismiss:d,suggestedSectionTitle:a?.suggestedSectionName||""})});default:return null}}},122222:function(e,t,n){n.d(t,{s:()=>r});let r={addOrEditDate:"addOrEditDate",boardArchiveConfirmation:"boardArchiveConfirmation",boardEdit:"boardEdit",boardUnarchiveConfirmation:"boardUnarchiveConfirmation",bulkCopy:"bulkCopy",bulkDelete:"bulkDelete",collaboratorsAndPermissions:"collaboratorsAndPermissions",createSection:"createSection",editSection:"editSection",followers:"followers",groupPins:"groupPins",jumpstartBoard:"jumpstartBoard",mergeBoard:"mergeBoard",moveSection:"moveSection",pincode:"pincode",sectionMergeConfirm:"sectionMergeConfirm",sendBoard:"sendBoard",simpleCreateSection:"simpleCreateSection"}},101267:function(e,t,n){n.d(t,{Ac:()=>o,c7:()=>i,cg:()=>r});let r=-1,i=5,o=6},700594:function(e,t,n){n.d(t,{Z:()=>i});var r=n(494926);function i({board:e,viewer:t}){return(0,r.Z)(t,e.owner?.id)?3069:3070}},768033:function(e,t,n){n.d(t,{Z:()=>q});var r=n(667294),i=n(581722),o=n(883119),a=n(548777),s=n(387012),l=n(2587),d=n(149238),c=n(285676),u=n(228612),h=n(802108);let p=e=>null===e,m=e=>e?164:5,g=e=>"story"===e.type&&["recommended_searches","search_related_queries","BUBBLE_ONE_COL"].includes(e.story_type),_=(e,t)=>e+(e>=t?1:0),f=(0,h.Q6)(e=>e);var b=n(631256),y=n(785893);function x(e){let{allowReordering:t,auxData:n,boardSectionId:i,gridItem:o,handlePinDragBegin:a,handlePinDragEnd:h,handlePinDragHover:p,index:g,isEggsUi:_,lfvExperiences:f,onBulkEditPinClick:x,source:v,target:P,viewParameter:j}=e,{inBulkEditMode:S,isCollaborator:w,isGroupBoard:D,isOwnBoard:C,isSelected:A,itemKey:{id:B}}=o,Z={pinId:B,duploQueryRef:null,imageOnlyOption:!C&&(0,d.Z)(f)?"image-only":"default",attributionOption:D?"show":"hide",pinImageCrop:"none",surface:S?"BulkEditMode":"BaseBoardPinGrid",slotIndex:g,viewParameter:j,viewType:m(i),auxData:n},E=(0,u.S6)()(B);if(!C&&!w)return _&&E?(0,y.jsx)(b.Z,{eventContext:{viewType:5,viewParameter:j,element:14583},isEggsUi:!0,pinKey:{type:"deprecated",data:E},children:({savedInfo:e})=>E?(0,y.jsx)(r.Fragment,{children:(0,y.jsx)(c.ZP,{...Z,isEggsUi:_,saveButtonOptions:{savedInfo:{...e,pinId:B},type:"inline"}})}):null}):(0,y.jsx)(c.ZP,{...Z});let I="no-selection";S&&(I=A?"selected":"deselected");let T=(0,y.jsx)(c.ZP,{...Z,disableHover:-1!==v||S,selectionState:I});return S&&(T=(0,y.jsx)(s.Z,{isSelected:A,onClick:()=>x(B),children:T})),t&&(T=(0,y.jsx)(l.Z,{index:g,isDragging:P===g,onDragBegin:a,onDragEnd:h,onDragHover:p,type:l.y.Pin,children:T})),T}var v=n(230201),P=n(828801),j=n(521367),S=n(115964),w=n(681698),D=n(261954),C=n(806513),A=n(138596),B=n(613567),Z=n(906127),E=n(250026),I=n(309266),T=n(718846),L=n(285544);function z({isSection:e}){let t=(0,A.ZP)(),n=e?t._('There aren\u2019t any Pins in this section yet', 'EmptyBoard.EmptyText.section', 'Statement that there are no pins in the section'):t._('There aren\u2019t any Pins on this board yet', 'EmptyBoard.EmptyText.board', 'Statement that there are no pins on the board');return(0,y.jsx)(L.Z,{children:(0,y.jsx)(o.xu,{"data-test-id":"empty-text",paddingY:8,children:(0,y.jsx)(o.xv,{color:"default",size:"300",children:n})})})}function M({hasSections:e,isSection:t}){return(0,y.jsx)(o.kC,{alignItems:"stretch",justifyContent:"center",width:"100%",children:!t&&e?null:(0,y.jsx)(z,{isSection:t})})}var O=n(716848),k=n(160587),R=n(773382),U=n(779686),$=n(438274),F=n(101267),N=n(142933);function H(e){let{boardSectionId:t,gridItem:n,index:r,inBoardOrganizationMode:i,paddingBottom:a,renderPinItem:s,viewParameter:l}=e,{itemKey:d}=n,c=null;switch(d.type){case"story":c=(0,y.jsx)(N.Z,{inBoardOrganizationMode:i,slot:r,storyId:d.id,viewParameter:l,viewType:m(t)});break;case"pin":c=(0,y.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{paddingBottom:a}},children:s(n,r)});break;default:c=null}return(0,y.jsx)(o.xu,{children:c},`${d.type}:${d.id}`)}let K=(0,n(728027).Z)(l.y.Pin)(function(e){let{allowReordering:t,children:n,connectDropTarget:r,index:i,isDragWithinBounds:o}=e;return t&&r?r((0,y.jsx)("div",{style:{opacity:-1===i||o?1:.5},children:n})):n});function W(e,t,n){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:r+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class G extends r.Component{constructor(...e){super(...e),W(this,"state",{reorderSource:-1,reorderTarget:-1,showPinNotesBanner:!0}),W(this,"anchorElementRef",(0,r.createRef)()),W(this,"masonryRef",{current:null}),W(this,"handlePinAdded",e=>{let{board:t,boardSectionId:n,dispatch:r}=this.props;e===t.id&&(r((0,k.xQ)(t.id)),n&&r((0,R.Z)(n)))}),W(this,"handlePinDragBegin",e=>this.setState({reorderSource:e})),W(this,"handlePinDragHover",e=>{let{reorderTarget:t}=this.state;e!==t&&this.setState({reorderTarget:e})}),W(this,"handlePinDragEnd",e=>{let{board:t,boardSectionId:n,dispatch:r,feed:i,viewParameter:o,orbacSubjectId:a}=this.props,{reorderSource:s,reorderTarget:l}=this.state;if(i&&e&&-1!==l&&-1!==s&&l!==s){let e=this.hiddenItemIndex,[d,c]=-1===e?[s,l]:[_(s,e),_(l,e)],u=(0,E.Z)(i,d,c),h=i[d].id;r((0,U._f)({feedType:n?$.Z.BOARD_SECTION_PINS:$.Z.BOARDFEED,feedId:n||t.id,itemType:"pin",targetItemId:i[c].id,sourceItemId:i[d].id}));let p=u.filter(e=>"pin"===e.type).map(e=>e.id),g=p.indexOf(h),f=g-1,b=g+1,y={pin:h};f>=0&&f<p.length&&(y={...y,before_pin:p[f]}),b>=0&&b<p.length&&(y={...y,after_pin:p[b]}),a&&(y={...y,orbac_subject_id:a}),(0,w.Z)({url:`/v3/boards/${t.id}/reorder_pin/`,method:"POST",data:y}).then(()=>this.props.logContextEvent({event_type:7122,object_id_str:h,view_type:m(n),view_parameter:o}))}this.setState({reorderSource:-1,reorderTarget:-1})}),W(this,"handleFetchMore",()=>{let{resource:{fetchMore:e,isAtEnd:t,isFetching:n}}=this.props;t||n||e()}),W(this,"renderPinItem",(e,t)=>{let{board:n,boardSectionId:r,isEggsUi:i,lfvExperiences:o,onBulkEditPinClick:a,viewer:s,viewParameter:l}=this.props,{reorderSource:d,reorderTarget:c}=this.state,u={board_id:n.id,board_pin_count:n.pin_count};return(0,y.jsx)(x,{allowReordering:this.allowReordering,auxData:u,boardSectionId:r,gridItem:e,handlePinDragBegin:this.handlePinDragBegin,handlePinDragEnd:this.handlePinDragEnd,handlePinDragHover:this.handlePinDragHover,index:t,isEggsUi:i,lfvExperiences:o,onBulkEditPinClick:a,source:d,target:c,viewer:s,viewParameter:l})}),W(this,"renderPinNoteBanner",()=>{let{currentFilter:e,i18n:t}=this.props;return e===F.c7&&this.state.showPinNotesBanner?(0,y.jsx)(S.ZP,{eligibleIds:[507342],placementId:12,children:({dismiss:e,complete:n})=>(0,y.jsx)(o.pl,{anchor:this.anchorElementRef.current,idealDirection:"up",message:t._('Pin notes are going away. Screenshot any notes you want to keep by April 7th', 'closeup.closeupPinNote.deprecationBanner', 'Banner message for deprecation of private notes on Pin'),onDismiss:()=>{e()},primaryAction:{onClick:()=>{this.setState({showPinNotesBanner:!1}),n()},role:"button",text:t._('Got it', 'Button text to indicate a user understands action', 'Button text to indicate a user understands action')}})}):null})}componentDidMount(){let{feed:e,resource:{isFetching:t,refresh:n}}=this.props;p(e)&&!t&&n()}componentDidUpdate(e){let{feed:t,resource:{isFetching:n,refresh:r}}=this.props;!p(t)||p(e.feed)||n||r()}get allowReordering(){let{board:{collaborated_by_me:e=!1},isOwnBoard:t,isPinGridSorted:n}=this.props;return!n&&(t||e)}get hiddenItemIndex(){let{denseViewSelected:e,feed:t}=this.props;return e?(t||[]).findIndex(g):-1}render(){let{bulkEditSelectedPins:e,board:t,boardSectionId:n,boardShopModuleId:i,desktopStories:a,featuredBoardStoryId:s,feed:l,feedStoryId:d,footerStoryId:c,denseViewSelected:u,hasSimplifiedPinGridExpLoaded:h,inBoardOrganizationMode:p,inSectionOrganizationMode:m,isDragWithinBounds:g,inSelectAll:_,renderFeaturedBoardsStory:b,renderFooterStory:x,renderMoreIdeas:v,renderBoardShopModule:j,boardShopModuleIndex:S,resource:{isAtEnd:w,isFetching:A,isLoaded:B},isOwnBoard:I,i18n:T}=this.props,{access:L,collaborated_by_me:z=!1,collaborator_count:k=0,section_count:R}=t,{reorderSource:U,reorderTarget:$}=this.state,{more_ideas:F}=t.featured_board_metadata||{};if(B&&l&&0===l.length)return(0,y.jsx)(M,{hasSections:!!R,isSection:!!n});let{allowReordering:N}=this,W=N&&U!==$&&-1!==U&&-1!==$,G=l||[],{hiddenItemIndex:Q}=this;-1!==Q&&(G=[...G.slice(0,Q),...G.slice(Q+1)]),W&&(G=(0,E.Z)(G,U,$));let q={inBulkEditMode:p||m,inDenseView:u||!1,isGroupBoard:k>0,userCanEdit:(L||[]).includes("write"),isOwnBoard:I,isCollaborator:z},V=!1,J=G.map(e=>(p||"story"!==e.type||a?.[e.id]?.story_type!=="board_shop_tool_module"||(V=!0),f({...q,itemKey:e}))),Y=!A&&w&&!l?.length;return(0,y.jsx)(O.H,{value:{onPinCreate:({boardId:e})=>this.handlePinAdded(e),onPinDelete:()=>V&&this.masonryRef.current?.reflow()},children:(0,y.jsxs)(o.xu,{"data-test-id":"base-board-pin-grid",minHeight:u?800:"",children:[i&&!p&&0===S&&j&&j(i,!0),(0,y.jsx)(K,{allowReordering:N,index:$,isDragWithinBounds:g,children:h&&(0,y.jsx)(Z.Z,{isAtEndOfFeed:w,isPlaceholderGrid:!0,itemCount:J.length,children:(0,y.jsx)(D.default,{_getColumnSpanConfig:V?function(e){return"story"===e.itemKey.type&&a?.[e.itemKey.id]?.story_type==="board_shop_tool_module"?3:e.itemKey.columnSpan??1}:void 0,columnWidth:u?C.Lo:void 0,isFetching:A,isLoadedAccessibilityLabel:J.length>0?T._('More Pins loaded for board', 'board.masonry.paginationLoaded', 'More Pins loaded for board'):T._('Loaded Pins for board', 'board.masonry.loaded', 'Pins have loaded for board'),isLoadingAccessibilityLabel:J.length>0?T._('Loading more Pins for board', 'board.masonry.paginationLoading', 'Loading more Pins for board'):T._('Loading Pins for board', 'board.masonry.loading', 'Loading Pins for board'),items:J,layout:"basic",loadItems:this.handleFetchMore,masonryRef:this.masonryRef,renderItem:({data:t,itemIdx:n})=>{let{inBulkEditMode:i}=q,a="pin"===t.itemKey.type&&!!e?.includes(t.itemKey.id);return(0,y.jsxs)(r.Fragment,{children:[this.renderPinNoteBanner(),(0,y.jsx)(o.xu,{ref:0===n?this.anchorElementRef:null,dangerouslySetInlineStyle:{__style:{marginBottom:u?-6:0}},children:(0,y.jsx)(H,{boardSectionId:this.props.boardSectionId,gridItem:{...t,isSelected:i&&(_?!a:a)},inBoardOrganizationMode:p,index:n,paddingBottom:this.props.denseViewSelected?6:0,renderPinItem:this.renderPinItem,viewParameter:this.props.viewParameter})})]})},useLoadingState:!Y},`${String(u)}-${String(p)}-${String(m)}`)})}),N&&-1!==U&&(0,y.jsx)(P.Z,{}),w&&!p&&i&&(S??0)>=J.length-1&&0!==S&&j&&j(i),w&&c&&x&&x(c),w&&s&&b&&b(s),!1!==F&&w&&d&&v&&v(d)]})})}}let Q=(0,j.RL)(1000182)(function(e){let{logContextEvent:t}=(0,v.v)(),n=(0,A.ZP)(),{checkExperiment:o}=(0,B.F)(),s=(0,T.Z)(),{hasSimplifiedPinGridExpLoaded:l}=(0,a.$)(),d=(0,I.Z)(),c=(0,i.v9)(e=>e.desktopStories),{board:u,boardSectionId:h,isOwnBoard:p,resource:m}=e,{is_featured_for_active_campaign:g}=u;return(0,r.useEffect)(()=>{m.isAtEnd&&t({event_type:15145,view_type:h?164:5,view_parameter:p?3069:3070,aux_data:{board_id:u.id,board_pin_count:u.pin_count,board_section_id:h,board_section_count:u.section_count}})},[u,h,p,t,m]),(0,y.jsx)(G,{...e,desktopStories:c,hasSimplifiedPinGridExpLoaded:l,i18n:n,isEggsUi:g&&o("web_easy_gift_guide_saving").anyEnabled,lfvExperiences:d,logContextEvent:t,orbacSubjectId:s})});Q.displayName="BaseBoardPinGrid";let q=Q},338170:function(e,t,n){n.d(t,{Z:()=>l});var r=n(581722),i=n(883119),o=n(271245),a=n(785893);let s=(0,o.Z)(()=>n.e("60300").then(n.bind(n,891305)),void 0,e=>891305,"app-common-react-components-FeaturedBoards-FeaturedBoardsModule");function l({isOwnBoard:e,storyId:t}){let n=(0,r.v9)(e=>e.desktopStories[t]),o=n&&"featured_boards"===n.story_type?n:void 0;return o?(0,a.jsx)(i.xu,{marginTop:3,padding:2,children:(0,a.jsx)(s,{renderAsStory:!0,slotIndex:-1,story:o,surface:"Board",viewParameter:e?3069:3070,viewType:5})}):null}},285544:function(e,t,n){n.d(t,{Z:()=>o});var r=n(883119),i=n(785893);function o({children:e}){return(0,i.jsx)(r.kC,{alignItems:"stretch",justifyContent:"center",children:e})}},173842:function(e,t,n){n.r(t),n.d(t,{default:()=>l});var r=n(581722),i=n(883119),o=n(271245),a=n(785893);let s=(0,o.Z)(()=>Promise.all([n.e("25418"),n.e("64332"),n.e("82408"),n.e("52154")]).then(n.bind(n,550385)),void 0,e=>550385,"app-www-BoardMoreIdeasPage-MoreIdeasTabContentPageDefault");function l({storyId:e}){let t=(0,r.v9)(t=>t.desktopStories[e]);return(t&&"board_ideas_feed"===t.story_type?t:void 0)?(0,a.jsx)(i.xu,{"data-test-id":"more-ideas-feed",children:(0,a.jsx)(s,{surface:"board"})}):null}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/27991-8ae39d672a1aa6aa.mjs.map